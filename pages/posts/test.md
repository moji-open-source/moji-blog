---
title: Rust æ•°æ®ç±»å‹
date: 2023-04-12
lang: zh-CN
tags: rust
categories: NOTES
---

# æ•°æ®ç±»å‹

> åˆ›å»ºäº 2023-04-12 16:59
>
> æœ¬ç¬”è®°ä¸»è¦æ¥è‡ªäº [Rust ç¨‹åºè®¾è®¡è¯­è¨€ ä¸­æ–‡ç‰ˆ](https://rustwiki.org/zh-CN/book/title-page.html#rust-ç¨‹åºè®¾è®¡è¯­è¨€) [3.2]ï¼Œæ—¨åœ¨è®°å½•ä¸ªäººå­¦ä¹ è¿‡ç¨‹ä¸­çš„é‡ç‚¹å’Œå¿ƒå¾—ä½“ä¼šã€‚åœ¨è®°å½•è¿‡ç¨‹ä¸­ï¼Œç¬”è€…ä¼šå¯¹æ–‡æ¡£ä¸­çš„æŸäº›å†…å®¹è¿›è¡Œæ‘˜æŠ„æˆ–ä¿®æ”¹ï¼Œå¹¶æ·»åŠ è‡ªå·±çš„æ³¨é‡Šæˆ–è¯´æ˜ã€‚å¦‚æœ‰ä¸å½“ä¹‹å¤„ï¼Œè¯·æŒ‡æ­£ã€‚

Rust çš„æ¯ä¸ªå€¼éƒ½æœ‰æ•°æ®ç±»å‹ï¼Œè¯¥ç±»å‹å‘Šè¯‰ Rust æ•°æ®æ˜¯è¢«æŒ‡å®šæˆå“ªç§ç±»å‹ä»è€Œè®© Rust çŸ¥é“å¦‚ä½•ä½¿ç”¨è¯¥æ•°æ®ã€‚

Rust æ˜¯ä¸€ç§**é™æ€ç±»å‹**è¯­è¨€ï¼Œå®ƒå¿…é¡»åœ¨ç¼–è¯‘æœŸå°±çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æ ¹æ®ä½¿ç”¨å€¼å’Œä½¿ç”¨æ–¹å¼æ¨å¯¼å‡ºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„ç±»å‹ã€‚å¯¹äºç±»å‹å¯èƒ½æ˜¯å¤šç§çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»è¦æ³¨æ˜å®ƒçš„ç¡®åˆ‡ç±»å‹ï¼Œä¾‹å¦‚ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å…è®¸æ—¶å®ƒä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š

```rust
let num = "42".trim().parse().expect("type conversion error");
```

å®ƒè¡¨æ˜ç¼–è¯‘å™¨éœ€è¦æˆ‘ä»¬æä¾›æ›´å¤šä¿¡æ¯æ¥ç¡®å®š `num` åˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹

```shell
# clover @ MacBook-Pro in ~/dev/rust/learn/datatype on git:master x [16:48:03] C:101
$ cargo run
   Compiling datatype v0.1.0 (/Users/clover/dev/rust/learn/datatype)
error[E0282]: type annotations needed
 --> src/main.rs:3:9
  |
3 |     let num = "42".trim().parse().expect("type conversion error");
  |         ^^^
  |
help: consider giving `num` an explicit type
  |
3 |     let num: /* Type */ = "42".trim().parse().expect("type conversion error");
  |            ++++++++++++

For more information about this error, try `rustc --explain E0282`.
error: could not compile `datatype` due to previous error


```

æ­£ç¡®åšæ³•åº”è¯¥æ˜¯è¿™æ ·ï¼š

```rust
let num: i8 = "42".trim().parse().expect("type conversion error");
```

## è¡¨é‡ç±»å‹

è¡¨é‡(Scalar)ç±»å‹è¡¨ç¤ºå•ä¸ªå€¼ã€‚Rust ä¸­æœ‰å››ä¸ªåŸºæœ¬çš„è¡¨é‡ç±»å‹ï¼šæ•´å½¢ã€æµ®ç‚¹ã€å¸ƒå°”å’Œå­—ç¬¦

### æ•´æ•°ç±»å‹

æ•´æ•°æ˜¯æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼Œä¾‹å¦‚ `u32` ã€‚åƒç±»å‹å£°æ˜è¡¨æ˜å®ƒçš„å€¼åº”è¯¥æ˜¯å  32 ä½ç©ºé—´çš„æ— ç¬¦å·æ•´å‹ï¼ˆæœ‰ç¬¦å·æ•´å½¢ä»¥ `i` å¼€å§‹ï¼Œi æ˜¯è‹±æ–‡å•è¯ integer çš„é¦–å­—æ¯ã€‚ä¸ä¹‹ç›¸åçš„æ˜¯ `u` ï¼Œä»£è¡¨æ— ç¬¦å· `unsigned` ç±»å‹ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™æ ·å®šä¹‰å½¢å¼ä¸­çš„ä»»ä½•ä¸€ä¸ªæ¥å£°æ˜æ•´æ•°å€¼çš„ç±»å‹ã€‚

| é•¿åº¦ | æœ‰ç¬¦å·ç±»å‹ | æ— ç¬¦å·ç±»å‹ |
| ---- | ---------- | ---------- |
| 8    | `i8`       | `u8`       |
| 16   | `i16`      | `u16`      |
| 32   | `i32`      | `u32`      |
| 64   | `i64`      | `u64`      |
| 128  | `i128`     | `u128`     |
| arch | `isize`    | `usize`    |

> æ¯ä¸ªå®šä¹‰å½¢å¼è¦ä¹ˆæ˜¯æœ‰ç¬¦å·ç±»å‹è¦ä¹ˆæ˜¯æ— ç¬¦å·ç±»å‹ï¼Œä¸”å¸¦æœ‰ä¸€ä¸ªæ˜¾å¼çš„å¤§å°ã€‚**æœ‰ç¬¦å·**å’Œ**æ— ç¬¦å·**è¡¨ç¤ºæ•°å­—èƒ½å¦å–è´Ÿæ•°â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ•°æ˜¯å¦å¯èƒ½æ˜¯è´Ÿæ•°ï¼ˆæœ‰ç¬¦å·ç±»å‹ï¼‰ï¼Œæˆ–ä¸€ç›´ä¸ºæ­£è€Œä¸éœ€è¦å¸¦ä¸Šç¬¦å·ï¼ˆæ— ç¬¦å·ç±»å‹ï¼‰ã€‚å°±åƒåœ¨çº¸ä¸Šå†™æ•°å­—ä¸€æ ·ï¼šå½“è¦å¼ºè°ƒç¬¦å·æ—¶ï¼Œæ•°å­—å‰é¢å¯ä»¥å¸¦ä¸Šæ­£å·æˆ–è´Ÿå·ï¼›ç„¶è€Œï¼Œå½“å¾ˆæ˜æ˜¾ç¡®å®šæ•°å­—ä¸ºæ­£æ•°æ—¶ï¼Œå°±ä¸éœ€è¦åŠ ä¸Šæ­£å·äº†ã€‚æœ‰ç¬¦å·æ•°å­—ä»¥[äºŒè¿›åˆ¶è¡¥ç ](https://en.wikipedia.org/wiki/Two's_complement)ï¼ˆè¯‘è€…è¡¥å……ï¼š[â€œè¡¥ç â€ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/è¡¥ç /6854613)ï¼‰å½¢å¼å­˜å‚¨ã€‚
>
> æ¯ä¸ªæœ‰ç¬¦å·ç±»å‹è§„å®šçš„æ•°å­—èŒƒå›´æ˜¯ -(2n - 1) ~ 2n - 1 - 1ï¼Œå…¶ä¸­ `n` æ˜¯è¯¥å®šä¹‰å½¢å¼çš„ä½é•¿åº¦ã€‚æ‰€ä»¥ `i8` å¯å­˜å‚¨æ•°å­—èŒƒå›´æ˜¯ -(27) ~ 27 - 1ï¼Œå³ -128 ~ 127ã€‚æ— ç¬¦å·ç±»å‹å¯ä»¥å­˜å‚¨çš„æ•°å­—èŒƒå›´æ˜¯ 0 ~ 2n - 1ï¼Œæ‰€ä»¥ `u8` èƒ½å¤Ÿå­˜å‚¨çš„æ•°å­—ä¸º 0 ~ 28 - 1ï¼Œå³ 0 ~ 255ã€‚
>
> æ­¤å¤–ï¼Œ`isize` å’Œ `usize` ç±»å‹å–å†³äºç¨‹åºè¿è¡Œçš„è®¡ç®—æœºä½“ç³»ç»“æ„ï¼Œåœ¨è¡¨ä¸­è¡¨ç¤ºä¸ºâ€œarchâ€ï¼šè‹¥ä½¿ç”¨ 64 ä½æ¶æ„ç³»ç»Ÿåˆ™ä¸º 64 ä½ï¼Œè‹¥ä½¿ç”¨ 32 ä½æ¶æ„ç³»ç»Ÿåˆ™ä¸º 32 ä½ã€‚
>
> ä½ å¯æŒ‰è¡¨ 3-2 ä¸­æ‰€ç¤ºçš„ä»»æ„å½¢å¼æ¥ç¼–å†™æ•´å‹çš„å­—é¢é‡ã€‚æ³¨æ„ï¼Œå¯èƒ½å±äºå¤šç§æ•°å­—ç±»å‹çš„æ•°å­—å­—é¢é‡å…è®¸ä½¿ç”¨ç±»å‹åç¼€æ¥æŒ‡å®šç±»å‹ï¼Œä¾‹å¦‚ `57u8`ã€‚æ•°å­—å­—é¢é‡è¿˜å¯ä»¥ä½¿ç”¨ `_` ä½œä¸ºå¯è§†åˆ†éš”ç¬¦ä»¥æ–¹ä¾¿è¯»æ•°ï¼Œå¦‚ `1_000`ï¼Œæ­¤å€¼å’Œ `1000` ç›¸åŒã€‚

(æˆ‘ç›®å‰å¯¹è¿™ä¸ªä¸å¤ªæ‡‚ï¼Œæˆ‘å°±ç›´æ¥æ‘˜è¿‡æ¥äº†)

| æ•°å­—å­—é¢é‡         | å®ä¾‹        |
| ------------------ | ----------- |
| åè¿›åˆ¶             | 98_222      |
| åå…­è¿›åˆ¶           | 0xff        |
| å…«è¿›åˆ¶             | 0o77        |
| äºŒè¿›åˆ¶             | 0b1111_0000 |
| å­—èŠ‚ï¼ˆä»…é™äº`u8`ï¼‰ | b'A'        |

å¦‚æœæˆ‘ä»¬ä¸ç¡®å®šè‡ªå·±éœ€è¦ä½¿ç”¨å“ªä¸€ç§ç±»å‹çš„æ•´å½¢ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ `i32` ï¼ŒåŒæ—¶è¿™ä¹Ÿæ˜¯ Rust é»˜è®¤çš„ç±»å‹ã€‚`isize` å’Œ `usize` ä¸€èˆ¬ç”¨ä½œæŸäº›é›†åˆçš„ç´¢å¼•ã€‚

> #### æ•´å‹æº¢å‡º
>
> æ¯”æ–¹è¯´æœ‰ä¸€ä¸ª `u8` ï¼Œå®ƒå¯ä»¥å­˜æ”¾ä» 0 åˆ° 255 çš„å€¼ã€‚é‚£ä¹ˆå½“ä½ å°†å…¶ä¿®æ”¹ä¸ºèŒƒå›´ä¹‹å¤–çš„å€¼ï¼Œæ¯”å¦‚ 256ï¼Œåˆ™ä¼šå‘ç”Ÿ**æ•´å‹æº¢å‡º**ï¼ˆ_integer overflow_ï¼‰ï¼Œè¿™ä¼šå¯¼è‡´ä¸¤ç§è¡Œä¸ºçš„å…¶ä¸­ä¸€ç§ã€‚å½“åœ¨è°ƒè¯•ï¼ˆdebugï¼‰æ¨¡å¼ç¼–è¯‘æ—¶ï¼ŒRust ä¼šæ£€æŸ¥æ•´å‹æº¢å‡ºï¼Œè‹¥å­˜åœ¨è¿™äº›é—®é¢˜åˆ™ä½¿ç¨‹åºåœ¨ç¼–è¯‘æ—¶ _panic_ã€‚Rust ä½¿ç”¨ panic è¿™ä¸ªæœ¯è¯­æ¥è¡¨æ˜ç¨‹åºå› é”™è¯¯è€Œé€€å‡ºã€‚ç¬¬ 9 ç«  [â€œ`panic!` ä¸ä¸å¯æ¢å¤çš„é”™è¯¯â€](https://rustwiki.org/zh-CN/book/ch09-01-unrecoverable-errors-with-panic.html)ä¼šè¯¦ç»†ä»‹ç» panicã€‚
>
> åœ¨å½“ä½¿ç”¨ `--release` å‚æ•°è¿›è¡Œå‘å¸ƒï¼ˆreleaseï¼‰æ¨¡å¼æ„å»ºæ—¶ï¼ŒRust **ä¸**æ£€æµ‹ä¼šå¯¼è‡´ panic çš„æ•´å‹æº¢å‡ºã€‚ç›¸åå½“æ£€æµ‹åˆ°æ•´å‹æº¢å‡ºæ—¶ï¼ŒRust ä¼šè¿›è¡Œä¸€ç§è¢«ç§°ä¸ºäºŒè¿›åˆ¶è¡¥ç åŒ…è£¹ï¼ˆ_twoâ€™s complement wrapping_ï¼‰çš„æ“ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¤§äºè¯¥ç±»å‹æœ€å¤§å€¼çš„æ•°å€¼ä¼šè¢«â€œåŒ…è£¹â€æˆè¯¥ç±»å‹èƒ½å¤Ÿæ”¯æŒçš„å¯¹åº”æ•°å­—çš„æœ€å°å€¼ã€‚æ¯”å¦‚åœ¨ `u8` çš„æƒ…å†µä¸‹ï¼Œ256 å˜æˆ 0ï¼Œ257 å˜æˆ 1ï¼Œä¾æ­¤ç±»æ¨ã€‚ç¨‹åºä¸ä¼š panicï¼Œä½†æ˜¯è¯¥å˜é‡çš„å€¼å¯èƒ½ä¸æ˜¯ä½ æœŸæœ›çš„å€¼ã€‚ä¾èµ–æ•´å‹æº¢å‡ºåŒ…è£¹çš„è¡Œä¸ºä¸æ˜¯ä¸€ç§æ­£ç¡®çš„åšæ³•ã€‚
>
> è¦æ˜¾å¼å¤„ç†æº¢å‡ºçš„å¯èƒ½æ€§ï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“é’ˆå¯¹åŸå§‹æ•°å­—ç±»å‹æä¾›çš„ä»¥ä¸‹ä¸€ç³»åˆ—æ–¹æ³•ï¼š
>
> - ä½¿ç”¨ `wrapping_*` æ–¹æ³•åœ¨æ‰€æœ‰æ¨¡å¼ä¸‹è¿›è¡ŒåŒ…è£¹ï¼Œä¾‹å¦‚ `wrapping_add`
> - å¦‚æœä½¿ç”¨ `checked_*` æ–¹æ³•æ—¶å‘ç”Ÿæº¢å‡ºï¼Œåˆ™è¿”å› `None` å€¼
> - ä½¿ç”¨ `overflowing_*` æ–¹æ³•è¿”å›è¯¥å€¼å’Œä¸€ä¸ªæŒ‡ç¤ºæ˜¯å¦å­˜åœ¨æº¢å‡ºçš„å¸ƒå°”å€¼
> - ä½¿ç”¨ `saturating_*` æ–¹æ³•ä½¿å€¼è¾¾åˆ°æœ€å°å€¼æˆ–æœ€å¤§å€¼

### æµ®ç‚¹æ•°

æµ®ç‚¹æ•°æ˜¯å¸¦æœ‰å°æ•°ç‚¹çš„æ•°å­—ï¼Œåœ¨ Rust ä¸­ï¼Œæµ®ç‚¹ç±»å‹æ•°å­—æœ‰ä¸¤ç§åŸºæœ¬ç±»å‹ã€‚Rust çš„æµ®ç‚¹å‹æ˜¯ `f32` å’Œ `f64` ï¼Œå®ƒä»¬çš„å¤§å°åˆ†åˆ«ä¸º 32 ä½å’Œ 64 ä½ã€‚é»˜è®¤çš„æµ®ç‚¹ç±»å‹æ˜¯ `f64` ï¼Œå› ä¸ºåœ¨ç°ä»£ CPU ä¸­å®ƒçš„é€Ÿåº¦ä¸ `f32` å‡ ä¹ç›¸åŒï¼Œä½†ç²¾åº¦æ›´é«˜ã€‚æ‰€æœ‰çš„æµ®ç‚¹ç±»å‹éƒ½æ˜¯æœ‰ç¬¦å·çš„ã€‚

```rust
// æµ®ç‚¹æ•°
let a = 1.0; // f64

let b: f32 = 2.0; // f32
```

> æµ®ç‚¹æ•°æŒ‰ç…§ IEEE-754 æ ‡å‡†è¡¨ç¤ºã€‚`f32` ç±»å‹æ˜¯å•ç²¾åº¦æµ®ç‚¹å‹ï¼Œ`f64` ä¸ºåŒç²¾åº¦æµ®ç‚¹å‹ã€‚

### å¸ƒå°”ç±»å‹

å¸ƒå°”ç±»å‹åªæœ‰ä¸¤ç§å€¼ï¼š`true` å’Œ `false` ã€‚é€šå¸¸ç”¨åœ¨ `if` æ¡ä»¶åˆ¤æ–­ä¸Šï¼Œå¸ƒå°”å€¼çš„å¤§å°ä¸º 1 ä¸ªå­—èŠ‚

```rust
let _true: bool = true;
let _false: bool = false;
```

### å­—ç¬¦ç±»å‹

Rust çš„ `char` ï¼ˆå­—ç¬¦ï¼‰ç±»å‹æ˜¯æœ€åŸºæœ¬çš„å­—æ¯ç±»å‹

```rust
let _char: char = 'A';
let _char: char = 'å—¨';
let _char: char = 'ğŸ‘‹';
```

å­—ç¬¦å’Œå­—ç¬¦ä¸²ä¸åŒçš„æ˜¯ï¼Œå­—ç¬¦å­—é¢é‡éœ€è¦ä½¿ç”¨ä½†å¼•å·æ‹¬èµ·æ¥ï¼Œè€Œå­—ç¬¦ä¸²æ˜¯åŒå¼•å·ã€‚Rust çš„å­—ç¬¦ç±»å‹å¤§å°ä¸º 4 ä¸ªå­—èŠ‚ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª Unicode æ ‡é‡å€¼ã€‚è¿™æ„å‘³ç€å®ƒå¯ä»¥è¡¨ç¤ºçš„è¿œè¿œä¸æ­¢æ˜¯ ASCIIã€‚æ ‡éŸ³å­—æ¯ï¼Œä¸­æ–‡/æ—¥æ–‡/éŸ©æ–‡çš„æ–‡å­—ï¼Œemojiï¼Œè¿˜æœ‰é›¶å®½ç©ºæ ¼(zero width space)åœ¨ Rust ä¸­éƒ½æ˜¯åˆæ³•çš„å­—ç¬¦ç±»å‹ã€‚

Unicode å€¼çš„èŒƒå›´ä¸º `U+0000~U+D7FF` å’Œ `U+E000`~`U+10FFFF` ã€‚å­—ç¬¦å¹¶ä¸æ˜¯ Unicode ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ‰€ä»¥äººåœ¨ç›´è§‰ä¸Šå¯¹å­—ç¬¦çš„ç†è§£å’Œ Rust çš„æ¦‚å¿µä¸ä¸€è‡´ã€‚

## å¤åˆç±»å‹

ç»„åˆç±»å‹å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚Rust æœ‰ä¸¤ç§åŸºæœ¬çš„å¤åˆç±»å‹ï¼šå…ƒç»„ï¼ˆtupleï¼‰ã€æ•°ç»„ï¼ˆArrayï¼‰

### å…ƒç»„ç±»å‹

å…ƒç»„æ˜¯å°†å¤šä¸ªä¸åŒç±»å‹çš„å€¼ç»„åˆåˆ°ä¸€ä¸ªå¤åˆç±»å‹ä¸­çš„ä¸€ç§åŸºæœ¬æ–¹å¼ï¼Œå…ƒç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæ— æ³•å†é‡æ–°å¢åŠ æˆ–ç¼©å°ã€‚

åœ¨ Rust ä¸­é€šè¿‡åœ¨å°æ‹¬å·å†…å†™å…¥ä»¥é€—å·åˆ†éš”çš„å€¼åˆ—è¡¨æ¥åˆ›å»ºä¸€ä¸ªå…ƒç»„ã€‚å…ƒç»„ä¸­çš„æ¯ä¸€ä¸ªä½ç½®éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œå¹¶ä¸”å…ƒç»„ä¸­ä¸åŒå€¼çš„ç±»å‹ä¸è¦æ±‚æ˜¯ç›¸åŒçš„ï¼ˆæ–‡æ¡£è¿™å¥è¯æœ‰äº›ç»•ä¸å¥½ç†è§£ï¼Œè¯´ç™½å°±æ˜¯ä¸€ä¸ªå…ƒç»„ä¸­æ¯ä¸€ä¸ªå€¼çš„ç±»å‹éƒ½ä¸è¦æ±‚ç›¸åŒã€‚åªéœ€è¦å’Œå½“å‰ç´¢å¼•åœ¨å…ƒç»„ç±»å‹å®šä¹‰ä¸­çš„ç±»å‹ç›¸åŒå³å¯ï¼Œä¾‹å¦‚ 2 å·ä½æ˜¯ `i32` é‚£ä¹ˆå®é™…å€¼çš„ 2 å·ä½åªèƒ½æ˜¯ `i32`ï¼‰

```rust
let tuple: (i32, &str, bool) = (1, "hi", false);
```

å¦‚æœå®é™…å€¼çš„ç±»å‹ä¸å®šä¹‰çš„ç±»å‹ä¸åŒï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæŠ›å‡ºé”™è¯¯ã€‚

```rust
let tuple: (i32, &str, bool) = (true, "hi", false);
```

åœ¨ç±»å‹å®šä¹‰ä¸­æ˜¯ `i32` ï¼Œä½†å®é™…å¾—åˆ°ä¸€ä¸ªå¸ƒå°”ï¼š

```shell
# clover @ MacBook-Pro in ~/dev/rust/learn/datatype on git:master x [18:11:19]
$ cargo build
   Compiling datatype v0.1.0 (/Users/clover/dev/rust/learn/datatype)
error[E0308]: mismatched types
  --> src/main.rs:44:37
   |
44 |     let tuple: (i32, &str, bool) = (true, "hi", false);
   |                                     ^^^^ expected `i32`, found `bool`

For more information about this error, try `rustc --explain E0308`.
error: could not compile `datatype` due to previous error
```

å¦‚æœæˆ‘ä»¬éœ€è¦æå–å…ƒç»„çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡å¼åŒ¹é…æ¥è§£æ„å…ƒç»„çš„å€¼ï¼š

```rust
let tuple: (i32, &str, bool) = (1, "hi", false);
let (num, halo, boolean) = tuple;
println!("num {} halo {} bool {}", num, halo, boolean)
```

```shell
# clover @ MacBook-Pro in ~/dev/rust/learn/datatype on git:master x [18:15:18]
$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/datatype`
num 1 halo hi bool false
```

é™¤äº†ä½¿ç”¨è§£æ„æ¥è·å–å…ƒç»„çš„å€¼å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ `.` è¿ä¸Šéœ€è¦è®¿é—®çš„å€¼çš„ç´¢å¼•æ¥ç›´æ¥è®¿é—®å…ƒç»„å…ƒç´ ï¼Œè¿™ç§æ–¹å¼æ¯”è¾ƒçµæ´»ï¼š

```rust
let tuple: (i32, &str, bool) = (1, "hi", false);
println!("num {} halo {} bool {}", tuple.0, tuple.1, tuple.2);
```

å’Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œå…ƒç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç´¢å¼•ä¸º 0

```shell
# clover @ MacBook-Pro in ~/dev/rust/learn/datatype on git:master x [16:04:01]
$ cargo run
   Compiling datatype v0.1.0 (/Users/clover/dev/rust/learn/datatype)
    Finished dev [unoptimized + debuginfo] target(s) in 0.28s
     Running `target/debug/datatype`
num 1 halo hi bool false
```

> æ²¡æœ‰ä»»ä½•å€¼çš„å…ƒç»„ `()` æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œåªæœ‰ä¸€ä¸ªå€¼ï¼Œä¹Ÿå†™æˆ `()`ã€‚è¯¥ç±»å‹è¢«ç§°ä¸º**å•å…ƒç±»å‹**ï¼ˆ_unit type_ï¼‰ï¼Œè¯¥å€¼è¢«ç§°ä¸º**å•å…ƒå€¼**ï¼ˆ_unit value_ï¼‰ã€‚å¦‚æœè¡¨è¾¾å¼ä¸è¿”å›ä»»ä½•å…¶ä»–å€¼ï¼Œå°±éšå¼åœ°è¿”å›å•å…ƒå€¼ã€‚

### æ•°ç»„ç±»å‹

å°†å¤šä¸ªå€¼ç»„åˆåœ¨ä¸€èµ·çš„å¦å¤–ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨æ•°ç»„ï¼Œä¸å…ƒç»„ä¸åŒçš„æ˜¯ï¼Œæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¿…é¡»å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚å’Œå…¶å®ƒè¯­è¨€ä¸åŒçš„æ˜¯ï¼ŒRust ä¸­çš„æ•°ç»„å…·æœ‰å›ºå®šé•¿åº¦ã€‚

```rust
let arr = [1, 2, 3, 4, 5];
```

å½“ä½ å¸Œæœ›å°†æ•°æ®åˆ†é…åˆ°æ ˆ(stack)è€Œä¸æ˜¯å †(heap)æ—¶æˆ–è€…ä½ å¸Œæœ›å§‹ç»ˆä¿å­˜æœ€ç»ˆå…·æœ‰å›ºå®šæ•°é‡çš„å…ƒç´ æ—¶å°±å¯ä»¥ä½¿ç”¨æ•°ç»„ã€‚ä½†ä»–ä»¬ä¸æƒ³ vector(å‘é‡)é‚£ä¹ˆçµæ´»ï¼Œvector ç±»ä¼¼æ ‡å‡†åº“æä¾›çš„é›†åˆç±»å‹ï¼Œå®ƒå…è®¸ä½ å¢é•¿æˆ–ç¼©å°å¤§å°ã€‚å¦‚æœä¸ç¡®å®šéœ€è¦ä½¿ç”¨æ•°ç»„è¿˜æ˜¯ vectorï¼Œé‚£å°±åº”è¯¥ä½¿ç”¨ vector (è¿™æ˜¯å› ä¸ºä½ çš„é•¿åº¦æ˜¯å¯å˜çš„æ‰ä¼šçº ç»“)

æ•°ç»„çš„ç±»å‹ä½¿ç”¨ä¸­æ‹¬å·ç¼–å†™ï¼Œå…¶ä¸­éœ€è¦åŒ…å«æ•°ç»„çš„ç±»å‹ã€åˆ†å·ã€æ•°é‡

```rust
let arr:[i32; 5] = [1, 2, 3, 4, 5];
```

ä»¥ä¸Šä»£ç  `i32` æ˜¯è¡¨ç¤ºæ•°ç»„å…ƒç´ çš„ç±»å‹ï¼Œåˆ†å·åé¢çš„ 5 è¡¨ç¤ºè¿™ä¸ªæ•°ç»„æœ‰ 5 ä½ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼éœ€è¦æ¯ä¸€ä¸ªå…ƒç´ ä¸­éƒ½æœ‰ä¸€ä¸ªåˆå§‹å€¼ï¼Œæœ‰äº›æ—¶å€™ä¸å¤ªå¥½ç”¨ã€‚å’±ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼åˆ›å»ºæ•°ç»„ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨åˆå§‹åŒ–ã€‚

```rust
let arr = [3; 5];
```

ä»¥ä¸Šä»£ç åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­ 3 è¡¨ç¤ºè¿™ä¸ªæ•°ç»„çš„åˆå§‹å€¼æ˜¯ 3ï¼Œç„¶åæœ‰ 5 ä¸ªå…ƒç´ ã€‚åœ¨è¿è¡Œçš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»º `[3, 3, 3, 3, 3]` ã€‚

æ•°ç»„æ˜¯å¯ä»¥åœ¨æ ˆå†…å­˜ä¸Šåˆ†é…çš„å·²çŸ¥å›ºå®šå¤§å°çš„å•ä¸ªå†…å­˜å—ã€‚å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥è®¿é—®æ•°ç»„çš„å…ƒç´ ã€‚

```rust
let arr = [1, 2, 3, 4, 5];
println!("first {} two {}", arr[0], arr[1]);
```

```shell
# clover @ MacBook-Pro in ~/dev/rust/learn/datatype on git:master x [9:39:12] C:101
$ cargo run
$ cargo run
   Compiling datatype v0.1.0 (/Users/clover/dev/rust/learn/datatype)
    Finished dev [unoptimized + debuginfo] target(s) in 0.43s
     Running `target/debug/datatype`
first 1 two 2
```

å°è¯•è®¿é—®è¶…å‡ºæ•°ç»„æœ«å°¾çš„å…ƒç´ ï¼š

```rust
let mut inp = String::new();
io::stdin().read_line(&mut inp).expect("faild to read");

let index: usize = inp.trim().parse().expect("fiald to parse");
let target = arr[index];

println!("target {}", target);
```

```shell
# clover @ MacBook-Pro in ~/dev/rust/learn/datatype on git:master x [9:47:54]
$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/datatype`
6
thread 'main' panicked at 'index out of bounds: the len is 5 but the index is 6', src/main.rs:55:18
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
```

è¯¥ç¨‹åºåœ¨ç´¢å¼•æ“ä½œä¸­ä½¿ç”¨æ— æ•ˆå€¼æ—¶å¯¼è‡´**è¿è¡Œæ—¶**é”™è¯¯ï¼Œç¨‹åºé€€å‡ºå¹¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼Œæœªæ‰§è¡Œåé¢çš„ä»£ç ã€‚å½“ä½ å°è¯•ä½¿ç”¨ç´¢å¼•è®¿é—®å…ƒç´ çš„æ—¶å€™ï¼ŒRust å°†æ£€æŸ¥ä½ æŒ‡å®šçš„ç´¢å¼•æ˜¯å¦å°äºæ•°ç»„é•¿åº¦ã€‚å¦‚æœç´¢å¼•å¤§äºæˆ–ç­‰äºæ•°ç»„é•¿åº¦ï¼ŒRust ä¼šå‡ºç° `panic` ã€‚è¿™ç§æ£€æŸ¥å¿…é¡»åœ¨è¿è¡Œæ—¶è¿›è¡Œï¼Œå°¤å…¶æ˜¯å’‹è¿™ç§æƒ…å†µä¸‹ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯èƒ½æ— æ³•çŸ¥é“ç”¨æˆ·ä¹‹åè¿è¡Œä»£ç æ—¶å°†è¾“å…¥ä»€ä¹ˆå€¼ã€‚

è¿™æ˜¯ Rust åœ¨å®è·µä¸­å®‰å…¨åŸåˆ™çš„ç¬¬ä¸€ä¸ªä¾‹å­ã€‚å¾ˆå¤šä½çº§è¯­è¨€ä¸­ï¼Œå¹¶ä¸è¿›è¡Œè¿™ç§æ£€æŸ¥ï¼Œè€Œä¸”åœ¨ä½ ä½¿ç”¨ä¸æ­£ç¡®çš„ç´¢å¼•æ—¶ï¼Œå¯ä»¥è®¿é—®æ— æ•ˆçš„å†…å­˜ã€‚Rust é€šè¿‡ç«‹å³é€€å‡ºçš„æ–¹å¼æ¥é˜²æ­¢è¿™ç§é”™è¯¯ï¼Œè€Œä¸æ˜¯å…è®¸è®¿é—®å¹¶ç»§ç»­è¿è¡Œç¨‹åºã€‚
